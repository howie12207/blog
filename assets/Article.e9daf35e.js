import{p as e,a as l,c as a,o as t,b as s,n as o,u as n,e as r,g as d,k as u,i,d as c,D as v,L as m,r as p,f as g,O as b,t as y,F as f,C as x,m as C,Q as w,h as k,w as h,E as _,A as z}from"./vendor.79ee6203.js";import{s as S,_ as I,b as T,t as j}from"./index.4c5a1ff6.js";import{i as L}from"./common.8fd1db50.js";import{s as P}from"./scrollTo.ce5980bc.js";e("data-v-9060080e");const B=[r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1),r("div",null,null,-1)];l();var D=I({props:{mainColor:{type:String,default:"#f00"},size:{type:Number,default:80}},setup(e){const l=e,r=a((()=>({"--loadingColor":l.mainColor,"--loadingSize":`${l.size}px`,"--loadingScale":l.size/40})));return(e,l)=>(t(),s("div",{style:o(n(r)),class:"icon_loading"},B,4))}},[["__scopeId","data-v-9060080e"]]);e("data-v-be38853c");const M=["type"];l();var $=I({props:{mainColor:{type:String,default:"#10b981"},disabledColor:{type:String,default:"#d1d5db"},loadingColor:{type:String,default:"#d1d5db"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},type:{type:String,default:"button",validator:e=>["button","submit","reset"].includes(e)}},emits:["click"],setup(e,{emit:l}){const r=e,v=e=>{r.disabled||l("click",e)},m=a((()=>({"--buttonMainColor":r.mainColor,"--buttonDisabledColor":r.disabledColor})));return(l,a)=>(t(),s("button",{style:o(n(m)),type:e.type,class:c(["base_button",{disabled:e.disabled},{loading:e.loading}]),onClick:v},[e.loading?(t(),d(D,{key:0,mainColor:e.loadingColor,class:"icon",size:16},null,8,["mainColor"])):u("",!0),i(l.$slots,"default",{},void 0,!0)],14,M))}},[["__scopeId","data-v-be38853c"]]);e("data-v-6df6e5c6");const E={class:"article xl:w-xl xl:mx-auto mx-4 p-4 lg:p-10 mb-4 bg-red-50 rounded shadow dark:bg-yellow-900 dark:text-red-200"},H={class:"lg:flex justify-between text-xs text-gray-500"},R={class:"text-3xl my-8 text-red-700 font-black dark:text-red-400"},U=["innerHTML"],A={class:"mt-12 text-yellow-700"},F={class:"text-right mt-2"},N=z("送出"),O={class:"text-gray-500 font-bold"},Q={class:"text-xs text-gray-400"},V={class:"comment_content text-sm"};l();var q=I({setup(e){const l=v(),a=m(),o=p(null),i=p(0);g((async()=>{await Promise.all([I(),J()]),i.value=o.value.getBoundingClientRect().top-56}));const c=p({}),I=async()=>{c.value=await T(a.params.id)},B=p(""),D=async()=>{var e;if(!l.getters.isLogin)return void _({type:"error",message:"請先登入",showClose:!0});if(!B.value.trim())return void _({type:"error",message:"請填寫內容",showClose:!0});const t={account:null==(e=l.state.userData)?void 0:e.account,content:B.value.trim(),articleId:a.params.id};var s;await(s=t,S({url:"/comment",method:"post",data:s}))&&(B.value="",_({type:"success",message:"留言成功",showClose:!0}),J())},M=p([]),q=p(0),G=p({page:0,size:10,articleId:a.params.id}),J=async(e=G.value)=>{const l=await function(e){return S({url:`/comment/${e.articleId}`,method:"get",params:e})}(e);M.value=(null==l?void 0:l.content)||[],q.value=(null==l?void 0:l.totalElements)||0},K=p(1),W=e=>{G.value.page=e-1,J(),P(i.value)};return(e,l)=>{const a=b;return t(),s("div",E,[r("div",H,[r("p",null," 建立時間： "+y(n(j)(c.value.createTime)),1),r("p",null," 最近一次更新時間： "+y(n(j)(c.value.updateTime)),1)]),r("div",R,y(c.value.name),1),r("div",{class:"content",innerHTML:c.value.content},null,8,U),r("div",A,[(t(!0),s(f,null,x(c.value.sorts,((e,l)=>(t(),s("span",{key:l,class:"mr-2"},"#"+y(e),1)))),128))]),r("div",{class:"text-3xl my-4 py-4 font-bold border-solid border-t-4 border-b-4 border-light-blue-500 dark:border-yellow-700",ref:(e,l)=>{l.commentRef=e,o.value=e}}," 留言區 ",512),C(r("textarea",{"onUpdate:modelValue":l[0]||(l[0]=e=>B.value=e),placeholder:"請輸入留言內容",class:"p-4 w-full focus:outline-none shadow focus:ring-1 bg-gray-200 rounded resize-none transition-shadow dark:bg-gray-700",rows:"10"},null,512),[[w,B.value]]),r("div",F,[k($,{onClick:D},{default:h((()=>[N])),_:1})]),(t(!0),s(f,null,x(M.value,((e,l)=>(t(),s("div",{key:l,class:"p-4 my-4 bg-red-100 rounded shadow"},[r("p",O,[z(y(e.account)+" ",1),r("span",Q,"("+y(n(j)(e.createTime))+")",1)]),r("p",V,y(e.content),1)])))),128)),q.value?(t(),d(a,{key:0,currentPage:K.value,"onUpdate:currentPage":l[1]||(l[1]=e=>K.value=e),class:"text-center",background:"",layout:"prev, pager, next",total:q.value,"pager-count":5,small:!n(L)(),onCurrentChange:W},null,8,["currentPage","total","small"])):u("",!0)])}}},[["__scopeId","data-v-6df6e5c6"]]);export{q as default};
